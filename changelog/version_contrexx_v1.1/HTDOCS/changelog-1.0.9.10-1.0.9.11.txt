////////////////////////////////////////
// CHANGELOG 1.0.9.10-1.0.9.11 /////////
////////////////////////////////////////

****************************************
* Changes ******************************
****************************************
Kontakte Manager
- Das Kalendersymbol bei einem Datumsfeld wird neu nicht mehr angezeigt.

Bildergalerie
- Die Detail-Inhaltsseite (?section=gallery&cmd=details) gibt es neu nicht mehr. Die Bilder werden nun auch gerade auf der Haupt Bildergalerie-Inhaltsseite (?section=gallery) angezeigt.

News
- Der Teaser Text, sofern definiert, erscheint nun auch im RSS-Feed.
- An der News Sumit Inhaltsseite müssen folgende Änderungen getätigt werden:
	Der Platzhalter [[NEWS_CAT_MENU]] muss mit dem folgenden Blockkonstrukt ersetzt werden:
		<!-- BEGIN news_category_menu -->
	  	<option value="[[NEWS_CATEGORY_ID]]">[[NEWS_CATEGORY_TITLE]]</option>
	  <!-- END news_category_menu -->

	Neu kann auch der Teaser Text angegeben werden:
		[[TXT_NEWS_TEASER_TEXT]]
		<textarea name="newsTeaserText" style="width: 100%;" cols="30" rows="5">[[NEWS_TEASER_TEXT]]</textarea>

	Ausserdem besteht auch die Möglichkeit eine Weiterleitung zu definieren:
		[[TXT_NEWS_REDIRECT]]
    <input type="text" style="width: 250px;" value="[[NEWS_REDIRECT]]" name="newsRedirect" />

  Neue Blöcke: news_submit_form und news_submitted

****************************************
* New Features *************************
****************************************
Adressverzeichnis (Memberdir)
- Einträge im Verzeichnis können nun im Frontend wie auch im Backend als vCard ( http://de.wikipedia.org/wiki/VCard ) exportiert werden.

Online Desk
- Produkte können neu kopiert werden.
- Bei der detail Frontend-Seite (?section=egov&cmd=detail) gibt es neu den Block '<!-- BEGIN egov_price --><!-- END egov_price -->'. Dieser wird nur angezeigt wenn der Preis des jeweiligen Produktes grösser als 0 ist.
- Neu kann für jedes Produkt das Bestellungsbestätigungs E-Mail definiert werden.

News
- Mit den Platzhalter [[NEWS_TEASER_TEXT]] kann bei der News Detail Seite neu der Teaser Text der Newsmeldung angezeigt werden.
- Bei einer News-Inhaltsseite kann neu direkt auf eine Kategorie verwiesen werden, indem als CMD die entsprechende Kategorie-ID angegeben wird.

Shop
- Die Auflistung der Unterkategorien wird nun auch gemäss der definierten Sortierreihenfolge sortiert.
- Neu kann ein JavaScript Warenkorb verwendet werden, welcher dynamisch aktualisiert wird, ohne dass die Webseite neu geladen werden muss.
 Damit der JavaScript Warenkorb verwendet werden kann, muss in der Konfigurationsdatei config/configuration.php die Eigenschaft shopJsCart auf true gesetzt werden:
 	$_CONFIGURATION['custom']['shopJsCart'] = true

 Die Struktur des Warenkorbes, dass im Template platziert werden muss, sieht folgendermassen aus:
 	<!-- BEGIN shopJsCart -->
		<div id="shopJsCart">
			<div id="shopJsCartTitle">Warenkorb</div>
			<div style="text-indent:2px;">
				<!-- BEGIN shopJsCartProducts -->
					[[SHOP_JS_PRODUCT_QUANTITY]]x [[SHOP_JS_PRODUCT_TITLE]] ([[SHOP_JS_PRODUCT_PRICE]] [[SHOP_JS_TOTAL_PRICE_UNIT]])<br />
				<!-- END shopJsCartProducts -->
				Total [[SHOP_JS_PRDOCUT_COUNT]] Artikel im Wert von [[SHOP_JS_TOTAL_PRICE]] [[SHOP_JS_TOTAL_PRICE_UNIT]]<br />
				<br />
				<a href='?section=shop&amp;cmd=cart' title="weiter zur Bestellung...">Warenkorb anzeigen</a>
			</div>
		</div>
	<!-- END shopJsCart -->

 Wobei zu beachten ist, dass das äusserste Blockelement, welches den Warenkorb definiert, als ID den Wert shopJsCart haben muss: id="shopJsCart
- Mit dem folgenden Block kann nun auf den Shop Inhaltsseiten ein Link angezeigt werden, der zur nächsten Kategorie navigiert:
	<!-- BEGIN shopNextCategoryLink -->
		<a href="?section=shop&amp;catId=[[SHOP_NEXT_CATEGORY_ID]]" title="Weiter zu [[SHOP_NEXT_CATEGORY_TITLE]]...">Weiter zu [[SHOP_NEXT_CATEGORY_TITLE]]...</a>
	<!-- END shopNextCategoryLink -->
- Neu können in der Administration unter Einstellungen->Allgemein->Mehrwertsteuer mehrere Mehrwertsteuersätze definiert
    und diese jedem Produkt individuell zugeordnet werden.
- Neu kann zu jedem Produkt ein Gewicht eingegeben werden.  Dies dient nicht nur der Information, sondern auch der
    Berechnung der Versandkosten.
- Die Versandkosten lassen sich deutlich flexibler gestalten, mit verschiedenen Tarifen in Abhängigkeit vom
    Gewicht und dem Bestellwert.
- Es steht nun eine einfache Schnittstelle für Import und Export von Shop Daten zur Verfügung.
  Beide verarbeiten die Daten in einem MS Excel kompatiblen CSV Format, bei dem die Felder in doppelte
  Anführungszeichen gesetzt und durch Semikola getrennt werden.
- Der Shop unterstützt nun die Zahlungsmethode Lastschrift.

Alias Verwaltung
- Mit der Alias Verwaltung können beliebige URL-Aliase für Webseiten definiert werden.

News Syndication
- Neu kann bei jeder NewsML Kategorie definiert werden, ob zugehörige Bilder eines Newselements angezeigt werden sollen oder nicht. Dazu muss beim Layout jeder Kategorie der Link zur Detailansicht einer Newsmeldung um den folgenden Parameter erweitert werden: &amp;catid=[[CATID]]
Beispiel:
Vorher: index.php?section=feed&amp;cmd=newsML&amp;id=[[ID]]
Nachher: index.php?section=feed&amp;cmd=newsML&amp;id=[[ID]]&amp;catid=[[CATID]]
- Neu werden die Bilder aller Wichtigkeitsstufen (Urgency-Tag) angzeigt.
- Bei der NewsML Detailsseite (?section=feed&cmd=newsML) gibt es drei neue Platzhalter zum Anzeigen des Datums der Newsmeldung:
	[[NEWSML_DATE]]	> Montag, 8. Januar 2007 10:15 h
	[[NEWSML_LONG_DATE]] > 10:15:06 08.01.2007
	[[NEWSML_SHORT_DATE]] > 08.01.2007

Kontakte Manager
- Der Inhalt eines Formularfeldes kann über die aufrufende URI gesetzt werden.
 Dazu muss bei der aufrufenden URI als Parameter die ID eines Formularfeldes und dessen Wertezuweisung angegeben werden.
 Wenn zum Beispiel bei einem Formular (angenommen dieses Formular hat die ID 2) das Feld "Betreff" die ID 44 hat und diesem Feld der Wert "Produkteanfrage" zugeweiesen werden soll, dann muss die aufzurufende URI folgendermassen aufgebaut sein:
 	index.php?section=contact&cmd=2&44=Produktanfrage
- Es wird eine Fehlermeldung ausgegeben, wenn der Dateiupload nicht erfolgreich war, oder der Eintrag in die Datenbank fehlschlug.

WYSIWYG-Editor
- Neue Version 2.4 des FCKeditors eingebunden. Weitere Informationen unter: http://www.fckeditor.net/whatsnew/
Neu wird nun einheitlich bei jeder Browser eine neue Zeile eingefügt, wenn die "Enter"-Taste betätigt wird. Wenn zusätzlich gleichzeitig noch die "Shift"-Taste betätigt wird, wir neu ein neuer Absatz eingefügt.

Bildergalerie
- Neu kann für jede Kategorie und dessen Unterkategorien eine eigene Inhaltsseite verwendet werden. Dies kann erreicht werden, indem bei einer Inhaltsseite, welche aus dem Aufbau der Galerie Inhaltsstruktur besteht, als CMD die ID der gewünschten Bilderkategorie angegeben wird.


****************************************
* Bugfixes *****************************
****************************************
- Bei verschachtelten Navigationen konnte auf [[NAVIGATION_ID]] nicht zugegriffen werden. Danke an zoyd für diesen Hinweis.

Webinstaller
- Inkompatible Datenbank Tabellen Präfixe werden nicht mehr akzeptiert.

Kalender
- Die Kalenderbox, wird nun, je nach Frontend-Sprache, in Deutsch oder Englisch angezeigt.

News Syndication
- Der NewsComponent (NewsML) wird mit PHP5 nun auch korrekt eingelesen.

Online Desk
- Beim Bearbeiten eines Produktes wird neu bei den Eigenschaften "Beschreibung" und "Meldung nach der Bestellung" auch HTML-Code akzeptiert.

Content Manager
- Ein unautorisierter Benutzer kann nun den Status (aktiv / inaktiv / sichtbar / unsichtbar) einer Seite nicht mehr ändern.

Newsletter
- Die Funktion zum Löschen einer Vorlage funktioniert nun auch wenn die Vorlage ein einfaches Anführungszeichen im Namen enthält.

Shop
- Die Informationen in der Shopnavbar werden wieder korrekt angezeigt.
- Adresse des Saferpay Gateways ist nun korrekt eingestellt.

Kontakte Manager
- Sonderzeichen werden nicht mehr in HTML-Codes umgewandelt beim versendenden E-Mail, da dies unnötig ist, weil das E-Mail als Plaintext versendet wird.

Volltextsuche
- Newsmeldungen von Typ Weiterleitung werden nun auch korrekt bei den Suchergebnissen aufgeliestet.