<!-- START shop_order_edit.html -->
<script type="text/javascript">
<!--

// array with the product informations
{SHOP_JS_ARR_PRODUCT}

// array with the shipment methods
{SHOP_JS_ARR_SHIPMENT}

// array with the payment methods
{SHOP_JS_ARR_PAYMENT}

// sum of all items, without either shipping or payment,
// taxes only included if applicable
var total_items_price = 0;

// get an array of all product ids from the order
// index => array ('id' => order_item_id, 'value' => product_id)
function getArrProduct()
{
    var arrProductId = new Array();
    var indexId = 0;

    // loop through input tags
    for (i=0; i<document.getElementsByTagName("input").length; i++){
        // input tags' id attribute
        elementId = document.getElementsByTagName("input")[i].getAttribute("id");
        if(elementId){
            // only go on with "shopProductId[]" IDs
            if(elementId.substr(0, 13) == "shopProductId"){
                // the containing row has the product ID
                if(document.getElementById(elementId).parentNode.parentNode.getAttribute("id") != "0"){
                    arrProductId[indexId] = new Array();
                    // order item ID, includes brackets (like "[167]")
                    var orderItemId = elementId.substr(13, elementId.length);
                    arrProductId[indexId]['id'] = orderItemId;
                    //? same order item ID?!
                    arrProductId[indexId]['value'] = document.getElementById("shopProductList"+orderItemId).value;
                    indexId++;
                }
            }
        }
    }
    return arrProductId;
}

// change the product "pId" to "newId" if a product
// with the id "newId" doesn't exist already
function changeProduct(pId, newId)
{
    // list of product items in the order
    var arrProductId = getArrProduct();
    anzPId = 0;

    if (pId == 'new') pId = "'new'";

    // try to find the new product id in the order array.
    // if newId is zero, an item is about to be removed.
    if (newId != '0') {
        for(i=0; i<arrProductId.length; i++) {
            if (newId == arrProductId[i]['value'] && pId != arrProductId[i]['id']){
                anzPId++;
            }
        }
    }

//alert("changeProduct: pId: '"+pId+"', newId: '"+newId+"', anzPId: '"+anzPId+"'");
    // check if the product is already present in the order list
    if (anzPId == 0) {
        // the new product ID is zero, so an item is to be deleted
        if (newId == "0") {
            if(pId == "'new'"){
                document.getElementById("shopProductId["+pId+"]").value = "0";
            }
            document.getElementById("shopProductQuantity["+pId+"]").value   = 0;
            document.getElementById("shopProductName["+pId+"]").value       = "";
            document.getElementById("shopProductPrice["+pId+"]").value      = '0.00';
            document.getElementById("shopProductTaxPercent["+pId+"]").value = '0.00';
            document.getElementById("shopProductWeight["+pId+"]").value     = '0 g';

        } else {
            // an existing items' id has been changed to another product id

            // there has to be at least one
            if(document.getElementById("shopProductQuantity["+pId+"]").value < 1){
                document.getElementById("shopProductQuantity["+pId+"]").value = 1;
            }
            document.getElementById("shopProductId["+pId+"]").value         = newId;
            document.getElementById("shopProductName["+pId+"]").value       = arrProducts[newId]['title'];
            document.getElementById("shopProductPrice["+pId+"]").value      = arrProducts[newId]['price'];
            document.getElementById("shopProductTaxPercent["+pId+"]").value = arrProducts[newId]['percent'];
            document.getElementById("shopProductWeight["+pId+"]").value     = weightToString(
                getWeightGrams(arrProducts[newId]['weight'])
                * Number(document.getElementById("shopProductQuantity["+pId+"]").value)
            );
        }

        document.getElementById("shopProductId["+pId+"]").parentNode.parentNode.setAttribute("id", newId)
        // calculate the product sum and the total order sum
        calcPrice(pId);
    } else {
        alert("{TXT_PRODUCT_ALREADY_PRESENT}");
        document.getElementById("shopProductList["+pId+"]").value = document.getElementById("shopProductId["+pId+"]").parentNode.parentNode.getAttribute("id");
    }
}

// weight settings
// units -- *MUST* be all lowercase!
var units = new Array('g', 'kg', 't', '');
// factors -- match units above, defaults to gram
var facts = new Array(1, 1000, 1000000, 1);

// convert weight string to grams (integer)
function getWeightGrams(strWeight) {
    // match positive float value
    var number = strWeight.match(/^[\d+\.]+/);
    var unit = 0; // default is grams
    for (var unit_index=0; unit_index<facts.length; unit_index++){
        // try to match one of the units
        var regex = new RegExp('[\\s\\d]'+units[unit_index]);
        if (regex.test(strWeight)) {
            unit = unit_index;
            break;
        }
    }
    return number * facts[unit];
}

// convert weight in grams (integer) to bigger unit, if appropriate (string)
function weightToString(intWeight) {
    var unit_index = 0;
    // find useful unit
    while (intWeight >= 1000) {
        unit_index++;
        intWeight /= 1000;
    }
    // round weight to three significant digits, add unit
    return intWeight.toPrecision(3)+' '+units[unit_index];
}

// update the total order weight
function updateWeight() {
    // total weight
    var totalWeight = 0;
    // loop through input tags, search for all product weights
    for (var element_index=0; element_index<document.getElementsByTagName("input").length; element_index++){
        // input tags' id attribute
        var elementId = document.getElementsByTagName("input")[element_index].getAttribute("id");
        if (elementId && elementId.substr(0, 17) == "shopProductWeight") {
            pId = elementId.substr(17)
            // pick number of items
            number = document.getElementById("shopProductQuantity"+pId).value
//alert("made pId: '"+pId+", number: "+number);
            // pick weight string from order item
            var weight = document.getElementsByTagName("input")[element_index].value.toLowerCase();
            // convert to grams (integer) and multiply
            grams = getWeightGrams(weight) * number;
            // sum of products' weights
            totalWeight += grams;
//alert("made weight: '"+number+"', unit '"+unit+"'");

        }
    }
//alert("total weight: '"+totalWeight+"'");
    // convert total weight to appropriate unit
    totalWeight = weightToString(totalWeight);
    document.forms.shopOrderEdit.shopTotalWeight.value = totalWeight;
}

// set the price of the selected shipment method
// the given shipper id is looked up in the shipments available,
// and those are searched for the cheapest match.
function updateShipment(){
    // who's shipping it?
    var sid = document.forms.shopOrderEdit.shipperId.value;
    // copy the price from the global variable
    var price = Number(document.forms.shopOrderEdit.shopNetPrice.value);
    // get the total weight
    var weight = getWeightGrams(document.forms.shopOrderEdit.shopTotalWeight.value);
    // check shipments available by this shipper
    var shipments = arrShipments[sid];
    // find the best match for the current order weight and shipment cost.
    // arbitrary upper limit - we *SHOULD* be able to find one that's lower!
    // we'll just try to find the cheapest way to handle the delivery.
    var lowest_cost = 1e100;
    // temporary shipment cost
    var cost = 0;
    // found flag is set to the index of a suitable shipment, if encountered below.
    // if the flag stays at -1, there is no way to deliver it!
    var found = -1;
// debug    var strAlert = "updateShipment():\nweight: "+weight+" > "+"price: "+price+"\n";
    // try all the available shipments;
    // (see Shipment.class.php::getJSArrays())
    for (var i=0; i<shipments.length; i++){
        price_free = shipments[i][2];
        max_weight = getWeightGrams(shipments[i][1]);
        // get the shipment conditions that are closest to our order:
        // we have to make sure the maximum weight is big enough for the order,
        // or that it's unspecified (don't care)
        if ((max_weight > 0 && weight <= max_weight ) || max_weight == 0) {
            // if price_free is set, the order amount has to be higher than that
            // in order to get the shipping for free.
            if (price_free > 0 && price >= price_free) {
                // we're well within the weight limit, and the order is also expensive
                // enough to get a free shipping.
                cost = '0.00';
//alert("FREE! price: "+price+", price_free: "+price_free);
            } else {
                // either the order amount is too low, or price_free is unset, or zero,
                // so the shipping has to be paid for in any case.
                cost = shipments[i][3];
//alert("cost set to "+cost);
            }

            // we found a kind of shipment that can handle the order, but maybe
            // it's too expensive. - keep the cheapest way to deliver it
            if (cost < lowest_cost) {
                // Aahh, found a cheaper one. keep the index.
                found = i;
                lowest_cost = cost;
            }
        }
// debug strAlert += "i: "+i+" > "+"cid: "+shipments[i][0]+", "+"mw: "+shipments[i][1]+" ("+"g: "+max_weight+"), "+"pf: "+shipments[i][2]+", "+"cost: "+shipments[i][3]+" -> "+"found: "+found+", "+"c: "+cost+" ==> "+"lc: "+lowest_cost+"\n";
    }
    if (found != -1) {
//alert(strAlert);
        // after checking all the shipments, we found the lowest cost for the
        // given weight and order price. - update the shipping cost
//alert("lc: "+lowest_cost);
        document.forms.shopOrderEdit.shopShippingPrice.value = lowest_cost; //.toFixed(2);
    } else {
        // alert the user
        alert("{TXT_WARNING_SHIPPER_WEIGHT}");
    }
}

// set the price of the selected payment method
function updatePayment(pId) {
    document.getElementById("shopPaymentPrice").value = arrPayment[pId];
    calcPrice();
}

// recalculate the entire form upto and including the total price.
// if a product ID is given, update the associated product row first.
function calcPrice(pId) {
    var arrProductId = getArrProduct();

    // calculate the total sum of the selected product
    if(pId) {
        if (pId == 'new') pId = "'new'";
//alert("got pId: "+pId);
        document.getElementById("shopProductSum["+pId+"]").value =
            (Number(document.getElementById("shopProductQuantity["+pId+"]").value)
           * Number(document.getElementById("shopProductPrice["   +pId+"]").value)).toFixed(2);
    }

    // totals
    totalVat = 0;
    totalSum = 0;
    for(i=0; i<arrProductId.length; i++){
        // update the total VAT amount
        totalVat += Number(document.getElementById("shopProductTaxPercent"+arrProductId[i]['id']).value)
                  * Number(document.getElementById("shopProductSum"+arrProductId[i]['id']).value) / 100;
        // update the total order value
        totalSum += Number(document.getElementById("shopProductSum"+arrProductId[i]['id']).value);
    }

    // store totalSum as net total before adding VAT
    document.forms.shopOrderEdit.shopNetPrice.value = (Math.round(totalSum*100)/100).toFixed(2);

    updateWeight();
    // if the total weight changes, so may the shipping conditions
    updateShipment();

    // round prices to cents
    totalVat = Math.round(totalVat*100)/100;
    if (vat_included == 0) {
        totalSum += totalVat;
    }
    // add shipping and payment cost
    totalSum +=   Number(document.getElementById("shopShippingPrice").value)
                + Number(document.getElementById("shopPaymentPrice").value);

    totalSum = Math.round(totalSum*100)/100;
    document.forms.shopOrderEdit.shopCurrencyOrderSum.value = totalSum.toFixed(2);
    document.forms.shopOrderEdit.shopTaxPrice.value = totalVat.toFixed(2);
}

function swapSendToStatus(orderId) {
    if(orderId == 4){
        document.getElementById("shopSendMailDiv").style.display = 'inline';
    } else {
        document.getElementById("shopSendMailDiv").style.display = 'none';
    }
}
 -->
</script>
<style type="text/css">
<!--
.inputCurrency {text-align: right;}
-->
</style>
<br />
<form id="shopOrderEdit" name="shopOrderEdit" method="post" action="?cmd=shop&amp;act=editorder">
    <table width="100%" border="0" class="adminlist" cellpadding="2" cellspacing="0">
        <colgroup><col width="15%" /><col width="35%" /><col width="15%" /><col width="35%" /></colgroup>
        <tr>
            <th colspan="4">{TXT_ORDER}</th>
        </tr>
        <tr class="row1">
            <td nowrap="nowrap">{TXT_ORDERNUMBER}</td>
            <td nowrap="nowrap">{SHOP_ORDERID}<input type="hidden" name="orderid" value="{SHOP_ORDERID}" /></td>
            <td nowrap="nowrap">{TXT_IP_ADDRESS}</td>
            <td nowrap="nowrap"><a href="http://geektools.com/whois.php" title="{TXT_WHOIS}" target="_blank">{SHOP_CUSTOMER_IP}</a></td>
        </tr>
        <tr class="row2">
            <td nowrap="nowrap">{TXT_ORDERDATE}</td>
            <td nowrap="nowrap">{SHOP_DATE}&nbsp;</td>
            <td nowrap="nowrap">{TXT_CLIENT_HOST}</td>
            <td nowrap="nowrap">{SHOP_CUSTOMER_HOST}</td>
        </tr>
        <tr class="row1" style="vertical-align:top;">
            <td nowrap="nowrap">{TXT_ORDERSTATUS}</td>
            <td nowrap="nowrap">{SHOP_ORDER_STATUS}<div id="shopSendMailDiv" style="{SHOP_SEND_MAIL_STYLE}">{TXT_SEND_TEMPLATE_TO_CUSTOMER}&nbsp;<input type="checkbox" name="shopSendMail" value="1" {SHOP_SEND_MAIL_STATUS}}/></div></td>
            <td nowrap="nowrap">{TXT_BROWSER_VERSION}</td>
            <td nowrap="nowrap">{SHOP_CUSTOMER_BROWSER}</td>
        </tr>
        <tr class="row2">
            <td nowrap="nowrap">{TXT_LAST_EDIT}</td>
            <td nowrap="nowrap">{SHOP_LAST_MODIFIED}<input type="hidden" name="shopLastModified" value="{SHOP_LAST_MODIFIED_DATE}" /></td>
            <td nowrap="nowrap">{TXT_BROWSER_LANGUAGE}</td>
            <td nowrap="nowrap">{SHOP_CUSTOMER_LANG}</td>
        </tr>
<!-- see below <tr class="row1"> <td nowrap="nowrap" width="15%">{TXT_ORDER_SUM}</td> <td nowrap="nowrap" width="85%" colspan="3">{SHOP_ORDER_SUM}&nbsp;{SHOP_DEFAULT_CURRENCY}</td> </tr> -->
        <tr><td></td></tr>
        <tr>
            <th nowrap colspan="2">{TXT_BILLING_ADDRESS}</th>
            <th nowrap colspan="2">{TXT_SHIPPING_ADDRESS}</th>
        </tr>
        <tr class="row1">
            <td nowrap="nowrap">{TXT_COMPANY}</td>
            <td nowrap="nowrap"><a href="index.php?cmd=shop&amp;act=neweditcustomer&amp;customerid={SHOP_CUSTOMER_ID}">{SHOP_COMPANY}</a>&nbsp;</td>
            <td nowrap="nowrap">{TXT_COMPANY}</td>
            <td nowrap="nowrap"><input type="text" name="shopShipCompany" value="{SHOP_SHIP_COMPANY}" /></td>
        </tr>
        <tr class="row2">
            <td nowrap="nowrap">{TXT_PREFIX}</td>
            <td nowrap="nowrap">{SHOP_PREFIX}&nbsp;</td>
            <td nowrap="nowrap">{TXT_PREFIX}</td>
            <td nowrap="nowrap"><input type="text" name="shopShipPrefix" value="{SHOP_SHIP_PREFIX}" /></td>
        </tr>
        <tr class="row1">
            <td nowrap="nowrap">{TXT_LAST_NAME}</td>
            <td nowrap="nowrap"><a href="index.php?cmd=shop&amp;act=neweditcustomer&amp;customerid={SHOP_CUSTOMER_ID}">{SHOP_LASTNAME}</a>&nbsp;</td>
            <td nowrap="nowrap">{TXT_LAST_NAME}</td>
            <td nowrap="nowrap"><input type="text" name="shopShipLastname" value="{SHOP_SHIP_LASTNAME}" /></td>
        </tr>
        <tr class="row2">
            <td nowrap="nowrap">{TXT_FIRST_NAME}</td>
            <td nowrap="nowrap"><a href="index.php?cmd=shop&amp;act=neweditcustomer&amp;customerid={SHOP_CUSTOMER_ID}">{SHOP_FIRSTNAME}</a>&nbsp;</td>
            <td nowrap="nowrap">{TXT_FIRST_NAME}</td>
            <td nowrap="nowrap"><input type="text" name="shopShipFirstname" value="{SHOP_SHIP_FIRSTNAME}" /></td>
        </tr>
        <tr class="row1">
            <td nowrap="nowrap">{TXT_ADDRESS}</td>
            <td nowrap="nowrap">{SHOP_ADDRESS}&nbsp;</td>
            <td nowrap="nowrap">{TXT_ADDRESS}</td>
            <td nowrap="nowrap"><input type="text" name="shopShipAddress" value="{SHOP_SHIP_ADDRESS}" /></td>
        </tr>
        <tr class="row2">
            <td nowrap="nowrap">{TXT_ZIP_CITY}</td>
            <td nowrap="nowrap">{SHOP_ZIP}&nbsp;{SHOP_CITY}</td>
            <td nowrap="nowrap">{TXT_ZIP_CITY}</td>
            <td nowrap="nowrap"><input type="text" name="shopShipZip" size="8" maxlength="8" value="{SHOP_SHIP_ZIP}" />&nbsp;<input type="text" name="shopShipCity" value="{SHOP_SHIP_CITY}" /></td>
        </tr>
        <tr class="row1">
            <td nowrap="nowrap">{TXT_COUNTRY}</td>
            <td nowrap="nowrap">{SHOP_COUNTRY}&nbsp;</td>
            <td nowrap="nowrap">{TXT_COUNTRY}</td>
            <td nowrap="nowrap">{SHOP_SHIP_COUNTRY}</td>
        </tr>
        <tr class="row2">
            <td nowrap="nowrap">{TXT_PHONE}</td>
            <td nowrap="nowrap">{SHOP_PHONE}&nbsp;</td>
            <td nowrap="nowrap">{TXT_PHONE}</td>
            <td nowrap="nowrap"><input type="text" name="shopShipPhone" value="{SHOP_SHIP_PHONE}" /></td>
        </tr>
        <tr class="row1">
            <td nowrap="nowrap">{TXT_FAX}</td>
            <td nowrap="nowrap">{SHOP_FAX}&nbsp;</td>
            <td></td>
            <td></td>
        </tr>
        <tr class="row2">
            <td nowrap="nowrap">{TXT_EMAIL}<input type="hidden" name="shopMailTo" value="{SHOP_EMAIL}" /></td>
            <td nowrap="nowrap"><a href="index.php?cmd=shop&act=settings&tpl=mail&strTab=shopMailSend&shopMailTo={SHOP_EMAIL}">{SHOP_EMAIL}</a>&nbsp;</td>
            <td nowrap="nowrap">{TXT_SHIPPING_METHOD}</td>
            <td nowrap="nowrap">{SHOP_SHIPPING_TYP_MENU}</td>
        </tr>
    </table>
    <br />
    <table border="0" width="100%" cellspacing="0" cellpadding="2" class="adminlist">
        <tr>
            <th colspan="2">{TXT_PAYMENT_INFORMATIONS}</th>
        </tr>
        <tr class="row1">
            <td nowrap="nowrap" width="15%">{TXT_PAYMENT_TYPE}</td>
    		<td nowrap='nowrap'>{SHOP_PAYMENTTYPE}&nbsp({SHOP_PAYMENT_HANDLER})</td>
        </tr>

<!-- BEGIN creditCard -->
        <tr class="row2">
            <td nowrap="nowrap">{TXT_CREDIT_CARD_OWNER}</td>
            <td nowrap="nowrap">{SHOP_CCNAME}&nbsp;</td>
        </tr>
        <tr class="row1">
            <td nowrap="nowrap">{TXT_CARD_NUMBER}</td>
            <td nowrap="nowrap">{SHOP_CCNUMBER}&nbsp;</td>
        </tr>
        <tr class="row2">
            <td nowrap="nowrap">{TXT_CVC_CODE}</td>
            <td nowrap="nowrap">{SHOP_CVC_CODE}&nbsp;</td>
        </tr>
        <tr class="row1">
            <td nowrap="nowrap">{TXT_EXPIRY_DATE}</td>
            <td nowrap="nowrap">{SHOP_CCDATE}&nbsp;</td>
        </tr>
<!-- END creditCard -->

<!-- BEGIN lsv -->
        <tr class="row2">
    		<td nowrap='nowrap'>{TXT_ACCOUNT_HOLDER}</td>
    		<td nowrap='nowrap'>{SHOP_ACCOUNT_HOLDER}&nbsp;</td>
    	</tr>
    	<tr class="row1">
    		<td nowrap='nowrap'>{TXT_ACCOUNT_BANK}</td>
    		<td nowrap='nowrap'>{SHOP_ACCOUNT_BANK}&nbsp;</td>
    	</tr>
    	<tr class="row2">
    		<td nowrap='nowrap'>{TXT_ACCOUNT_BLZ}</td>
    		<td nowrap='nowrap'>{SHOP_ACCOUNT_BLZ}&nbsp;</td>
    	</tr>
<!-- END lsv -->

	</table>
    <br />
    <table border="0" width="100%" class="adminlist" cellspacing="0" cellpadding="2">
        <tr>
            <th colspan="7">{TXT_BILL}</th>
        </tr>
        <tr class="row1">
            <td width="10%" nowrap="nowrap"><b>{TXT_NUMBER}</b></td>
            <td width="10%" nowrap="nowrap"><b>{TXT_PRODUCT_ID}</b></td>
            <td width="40%" nowrap="nowrap"><b>{TXT_PRODUCT_NAME}</b></td>
    		<td width="10%" nowrap='nowrap'><div style="text-align:center;"><b>{TXT_WEIGHT}</b></div></td>
            <td width="15%" nowrap="nowrap"><div style="text-align:center;"><b>{TXT_PRODUCT_PRICE}</b></div></td>
            <td width="10%" nowrap="nowrap"><div style="text-align:center;"><b>{TXT_TAX_RATE}</b></div></td>
            <td width="15%" nowrap="nowrap"><div style="text-align:center;"><b>{TXT_SUM}</b></div></td>
        </tr>
<!-- BEGIN orderdetailsRow -->
        <tr id="{SHOP_P_ID}" class="{SHOP_ROWCLASS}">
            <td nowrap="nowrap">
                <input type="text" id="shopProductQuantity[{SHOP_P_ID}]" name="shopProductQuantity[{SHOP_P_ID}]" value="{SHOP_QUANTITY}" size="5" maxlength="5" onchange="javascript:calcPrice({SHOP_P_ID})" />
            </td>
            <td nowrap="nowrap">
                <input type="hidden" name="shopProductIdOld[{SHOP_P_ID}]" value="{SHOP_P_ID}" />
                <input type="hidden" name="shopProductId[{SHOP_P_ID}]" id="shopProductId[{SHOP_P_ID}]" value="{SHOP_P_ID}" />
                <select id="shopProductList[{SHOP_P_ID}]" name="shopProductList[{SHOP_P_ID}]" size="1" onchange="javascript:changeProduct({SHOP_P_ID}, this.value)">
                    <option value="0">none</option>
                    {SHOP_PRODUCT_IDS_MENU}
                </select>
            </td>
            <td nowrap="nowrap">
                <input type="text" size="50" id="shopProductName[{SHOP_P_ID}]" name="shopProductName[{SHOP_P_ID}]" value="{SHOP_PRODUCT_NAME}" />
            </td>
            <td nowrap="nowrap">
                <input class="inputCurrency" type="text" id="shopProductWeight[{SHOP_P_ID}]" name="shopProductWeight[{SHOP_P_ID}]" value="{SHOP_PRODUCT_WEIGHT}" onchange="javascript:calcPrice({SHOP_P_ID})" />&nbsp;
            </td>
            <td nowrap="nowrap">
                <input class="inputCurrency" type="text" id="shopProductPrice[{SHOP_P_ID}]" name="shopProductPrice[{SHOP_P_ID}]" value="{SHOP_PRODUCT_PRICE}" onchange="javascript:calcPrice({SHOP_P_ID})" />&nbsp;{SHOP_CURRENCY}
            </td>
            <td nowrap="nowrap">
                <input class="inputCurrency" type="text" id="shopProductTaxPercent[{SHOP_P_ID}]" name="shopProductTaxPercent[{SHOP_P_ID}]" value="{SHOP_PRODUCT_TAX_RATE}" onchange="javascript:calcPrice({SHOP_P_ID})" />&nbsp;%
            </td>
            <td nowrap="nowrap">
                <input readonly class="inputCurrency" type="text" id="shopProductSum[{SHOP_P_ID}]" name="shopProductSum[{SHOP_P_ID}]" value="{SHOP_PRODUCT_SUM}" />&nbsp;{SHOP_CURRENCY}
            </td>
        </tr>
<!-- END orderdetailsRow -->
        <tr id="0" class="{SHOP_ROWCLASS_NEW}">
            <td nowrap="nowrap">
                <input type="text" id="shopProductQuantity['new']" name="shopProductQuantity['new']" value="0" size="5" maxlength="5" onchange="javascript:calcPrice('new')" />
            </td>
            <td nowrap="nowrap">
                <input type="hidden" name="shopProductId['new']" id="shopProductId['new']" value="0" />
                <select id="shopProductList['new']" name="shopProductList['new']" size="1" onchange="javascript:changeProduct('new', this.value)">
                    <option value="0">none</option>
                    {SHOP_PRODUCT_IDS_MENU_NEW}
                </select>
            </td>
            <td nowrap="nowrap">
                <input type="text" size="50" id="shopProductName['new']" name="shopProductName['new']" value="" />
            </td>
            <td nowrap="nowrap"><div style="text-align:center;">
                <input class="inputCurrency" type="text" id="shopProductWeight['new']" name="shopProductWeight['new']" value="0 g" onchange="javascript:calcPrice({SHOP_P_ID})" />&nbsp;
            </div></td>
            <td nowrap="nowrap"><div style="text-align:center;">
                <input class="inputCurrency" type="text" id="shopProductPrice['new']" name="shopProductPrice['new']" onchange="javascript:calcPrice('new')" value="0.00" />&nbsp;{SHOP_CURRENCY}
            </div></td>
            <td nowrap="nowrap"><div style="text-align:center;">
                <input class="inputCurrency" type="text" id="shopProductTaxPercent['new']" name="shopProductTaxPercent['new']" onchange="javascript:calcPrice('new')" value="0.00" />&nbsp;%
            </div></td>
            <td nowrap="nowrap"><div style="text-align:right;">
                <input class="inputCurrency" type="text" id="shopProductSum['new']" name="shopProductSum['new']" value="0.00" onchange="javascript:calcPrice('new')" />&nbsp;{SHOP_CURRENCY}
            </div></td>
        </tr>
<!-- BEGIN shopNetPrice -->
        <tr>
            <td colspan="5">&nbsp;</td>
            <td nowrap="nowrap"><div style="text-align:right;"><b>{TXT_NET_PRICE}</b></div></td>
            <td nowrap="nowrap"><div style="text-align:right;"><input class="inputCurrency" type="text" id="shopNetPrice" name="shopNetPrice" value="{SHOP_NET_PRICE}" onchange="javascript:calcPrice()" />&nbsp;{SHOP_CURRENCY}</div></td>
        </tr>
<!-- END shopNetPrice -->
<!-- BEGIN shopTaxPrice -->
        <tr>
            <td colspan="5">&nbsp;</td>
            <td nowrap="nowrap"><div style="text-align:right;"><b>{SHOP_PART_TAX_PROCENTUAL}</b></div></td>
            <td nowrap="nowrap"><div style="text-align:right;"><input class="inputCurrency" type="text" id="shopTaxPrice" name="shopTaxPrice" value="{SHOP_TAX_PRICE}" onchange="javascript:calcPrice()" />&nbsp;{SHOP_CURRENCY}</div></td>
        </tr>
<!-- END shopTaxPrice -->
        <tr><td>&nbsp;</td></tr>
        <tr>
            <td colspan="2">&nbsp;</td>
            <td nowrap="nowrap"><div style="text-align:right;"><b>{TXT_TOTAL_WEIGHT}</b>&nbsp;</div></td>
            <td nowrap="nowrap"><div style="text-align:right;"><input class="inputCurrency" type="text" id="shopTotalWeight" name="shopTotalWeight" value="{SHOP_TOTAL_WEIGHT}" onchange="javascript:calcPrice({SHOP_P_ID})" />&nbsp;</div></td>
            <td colspan="1">&nbsp;</td>
            <td nowrap="nowrap"><div style="text-align:right;"><b>{TXT_SHIPPING_PRICE}</b></div></td>
            <td nowrap="nowrap"><div style="text-align:right;"><input class="inputCurrency" type="text" id="shopShippingPrice" name="shopShippingPrice" value="{SHOP_SHIPPING_PRICE}" onchange="javascript:calcPrice()" />&nbsp;{SHOP_CURRENCY}</div></td>
        </tr>
        <tr>
            <td colspan="5">&nbsp;</td>
            <td nowrap="nowrap"><div style="text-align:right;"><b>{TXT_PAYMENT_COSTS}</b></div></td>
            <td nowrap="nowrap"><div style="text-align:right;"><input class="inputCurrency" type="text" id="shopPaymentPrice" name="shopPaymentPrice" value="{SHOP_PAYMENT_PRICE}" onchange="javascript:calcPrice()" />&nbsp;{SHOP_CURRENCY}</div></td>
        </tr>
        <tr>
        <tr>
            <td colspan="5">&nbsp;</td>
            <td nowrap="nowrap"><div style="text-align:right;"><b>{TXT_TOTAL}</b></div></td>
            <td nowrap="nowrap"><div style="text-align:right;"><input class="inputCurrency" type="text" id="shopCurrencyOrderSum" name="shopCurrencyOrderSum" value="{SHOP_CURRENCY_ORDER_SUM}" onchange="javascript:calcPrice()" />&nbsp;{SHOP_CURRENCY}</div></td>
        </tr>
    </table>
    <br />
    <table border="0" width="100%" cellpadding="2" cellspacing="0" class="adminlist">
        <tr>
            <th>{TXT_CUSTOMER_REMARKS}</th>
        </tr>
        <tr>
            <td><div style="vertical-align:top;">{SHOP_CUSTOMER_NOTE}&nbsp;</div></td>
        </tr>
    </table>
    <br />
    <input type="submit" name="shopSaveOrderChanges" value="{TXT_STORE}" />
</form>
<!-- END shop_order_edit.html -->
