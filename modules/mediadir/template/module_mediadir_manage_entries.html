<!-- START module_mediadir_modify_category.html -->
<script language="JavaScript" type="text/javascript">
// <![CDATA[
//needs prototype.js


function deleteEntry(entryId)
{
    if (confirm('{TXT_MEDIADIR_CONFIRM_DELETE_DATA}\n{TXT_MEDIADIR_ACTION_IS_IRREVERSIBLE}')) {
        window.location.replace("index.php?cmd=mediadir&act=delete_entry&id="+entryId);
    }
}

function entriesAreChecked(fieldName, objForm)
{
    x = 0;
    for (i = 0; i < objForm.elements.length; ++i) {
        e = objForm.elements[i];
        if (e.name == fieldName && e.checked == true) return true;
    }
    return false;
}

function entriesDoAction(formId, objSelect)
{
    objForm = document.getElementById(formId);

    if (entriesAreChecked("entriesFormSelected[]", objForm) == true) {
        switch(objSelect.value) {
            case "delete_entry":
                if (confirm('{TXT_MEDIADIR_CONFIRM_DELETE_DATA}\n{TXT_MEDIADIR_ACTION_IS_IRREVERSIBLE}')) {
                    actionValue = "index.php?cmd=mediadir&act=delete_entry";
            	}
                break
            case "move_entry":
                actionValue = "index.php?cmd=mediadir&act=move_entry";
                break
            case "restore_voting":
                if (confirm('{TXT_MEDIADIR_CONFIRM_DELETE_DATA}\n{TXT_MEDIADIR_ACTION_IS_IRREVERSIBLE}')) {
                    actionValue = "index.php?cmd=mediadir&act=restore_voting";
            	}
                break
            case "restore_comments":
                if (confirm('{TXT_MEDIADIR_CONFIRM_DELETE_DATA}\n{TXT_MEDIADIR_ACTION_IS_IRREVERSIBLE}')) {
                    actionValue = "index.php?cmd=mediadir&act=restore_comments";
            	}
                break
        }

        if(actionValue != '') {
            objForm.action = actionValue;
            objForm.submit();
        }
    } else {
        alert("{TXT_MEDIADIR_MAKE_SELECTION}");
    }

    objSelect.value = "0";
}

var switchState = function(id, obj, action, type)
{
    var img = obj.getElementsByTagName("img")[0];
    if (action == 0) {
        img.src = "images/icons/status_red.gif";
        obj.onclick = function() { switchState(id, obj, 1, type); }
    } else {
        img.src = "images/icons/status_green.gif";
        obj.onclick = function() { switchState(id, obj, 0, type); }
    }

    if(new Ajax.Request('index.php', {
            method: 'get',
            parameters: {cmd : "mediadir", act : "switchState", id : id, state : action, type : type},
            onSuccess: function() {}
        })) {
    }
}
// ]]>
</script>
<table border="0" cellpadding="3" cellspacing="0" width="100%" class="adminlist">
    <tr>
        <th colspan="2">{TXT_FUNCTIONS}</th>
    </tr>
    <tr class="row1">
        <td width="100" valign="top">{TXT_ENTRY_SEARCH}</td>
        <td>
            <form id="search" method="post" action="index.php?cmd=mediadir&amp;act=entries">
            <input type="text" name="term" value="{MEDIADIR_SEARCH_TERM}" onclick="this.value=''" style="width: 200px;" />&nbsp;<!-- BEGIN mediadirLevelDoropdown --><select name="level_id" style="width: 172px;"><option value="0">{TXT_MEDIADIR_ALL_LEVELS}</option>{MEDIADIR_LEVELS_DROPDOWN_OPTIONS}</select>&nbsp;<!-- END mediadirLevelDoropdown --><select name="cat_id" style="width: 172px;"><option value="0">{TXT_MEDIADIR_ALL_CATEGORIES}</option>{MEDIADIR_CATEGORIES_DROPDOWN_OPTIONS}</select>&nbsp;<input type="submit" name="Submit" value="{TXT_SEARCH}" />
            </form>
        </td>
    </tr>
</table>
<br />
<form id="manageEntriesForm" action="index.php?cmd=mediadir&act=entries" method="post">
<table border="0" cellpadding="3" cellspacing="0" width="100%" class="adminlist">
    <tr>
        <th colspan="9">{TXT_MEDIADIR_PAGE_TITLE}</th>
    </tr>
    <tr class="row3">
        <td width="1%" style="text-align: center;"><strong>#</strong></td>
        <td width="1%"><strong>{TXT_MEDIADIR_STATUS}&nbsp;&nbsp;&nbsp;</strong></td>
        <td width="29%"><strong>{TXT_MEDIADIR_NAME}</strong></td>
        <td width="20%"><strong>{TXT_MEDIADIR_DATE}</strong></td>
        <td width="10%"><strong>{TXT_MEDIADIR_AUTHOR}</strong></td>
        <td width="10%"><strong>{TXT_MEDIADIR_VOTING}</strong></td>
        <td width="10%"><strong>{TXT_MEDIADIR_COMMENTS}</strong></td>
        <td width="5%"><strong>{TXT_MEDIADIR_HITS}</strong></td>
        <td width="1%" ><strong>{TXT_MEDIADIR_ACTION}</strong></td>
    </tr>
    <!-- BEGIN mediadirEntryList -->
        <tr class="{MEDIADIR_ROW_CLASS}">
            <td valign="top"><input type="checkbox" name="entriesFormSelected[]" value="{MEDIADIR_ENTRY_ID}" />
            <td valign="middle" style="text-align: center;"><a href="javascript: void(0);" onclick="switchState({MEDIADIR_ENTRY_ID}, this, {MEDIADIR_ENTRY_SWITCH_STATUS}, 'entry')"><img src="{MEDIADIR_ENTRY_STATUS}" border="0" alt="" title="" /></td>
            <td valign="top"><b><a href="index.php?cmd=mediadir&amp;act=modify_entry&amp;id={MEDIADIR_ENTRY_ID}" target="_self" title="{MEDIADIR_ENTRY_NAME} {TXT_EDIT}">{MEDIADIR_ENTRY_FIELD_1_POS}</a></b></td>
            <td valign="top">{MEDIADIR_ENTRY_VALIDATE_DATE}</td>
            <td valign="top">{MEDIADIR_ENTRY_AUTHOR}</td>
            <td valign="top">{MEDIADIR_ENTRY_VOTES}</td>
            <td valign="top"><a href="index.php?cmd=mediadir&act=comments&id={MEDIADIR_ENTRY_ID}">{MEDIADIR_ENTRY_COMMENTS}</a></td>
            <td valign="top">{MEDIADIR_ENTRY_HITS}</td>
            <td valign="top" style="text-align: right;" nowrap="nowrap">
                <a href="index.php?cmd=mediadir&amp;act=modify_entry&amp;id={MEDIADIR_ENTRY_ID}" target="_self" title="{MEDIADIR_ENTRY_NAME} {TXT_EDIT}"><img src="images/icons/edit.gif" border="0" alt="{MEDIADIR_ENTRY_NAME} {TXT_EDIT}" title="{MEDIADIR_ENTRY_NAME} {TXT_EDIT}" /></a>
                <a href="javascript:deleteEntry('{MEDIADIR_ENTRY_ID}');" title="{MEDIADIR_ENTRY_NAME} {TXT_DELETE}"><img src="images/icons/delete.gif" border="0" alt="{MEDIADIR_ENTRY_NAME} {TXT_DELETE}" title="{MEDIADIR_ENTRY_NAME} {TXT_DELETE}" /></a>
            </td>
        </tr>
    <!-- END mediadirEntryList -->
    <!-- BEGIN noEntriesFound -->
        <tr class="row1">
            <td colspan="9"><em>{TXT_MEDIADIR_NO_ENTRIES_FOUND}</em></td>
        </tr>
    <!-- END noEntriesFound -->
</table>
<!-- BEGIN mediadirEntriesSelectAction -->
<table border="0" cellpadding="3" cellspacing="0" width="100%">
    <tr>
        <td valign="top">
        <img src="images/icons/arrow.gif" border="0" width="38" height="22" alt="" />
        <a href="javascript:{void(0)};" onclick="changeCheckboxes('manageEntriesForm','entriesFormSelected[]',true); return false;">{TXT_SELECT_ALL}</a> / <a href="javascript:{void(0)};" onclick="changeCheckboxes('manageEntriesForm','entriesFormSelected[]',false); return false;">{TXT_DESELECT_ALL}</a>
        <img src="images/icons/strike.gif" width="34" height="22" alt="strike" />
        <select name="selectAction" onchange="entriesDoAction('manageEntriesForm', this);">
            <option value="0" selected="selected">{TXT_SELECT_ACTION}</option>
            <option value="delete_entry">{TXT_DELETE_ALL}</option>
            <option value="move_entry">{TXT_MEDIADIR_MOVE_ALL}</option>
            <option value="restore_voting">{TXT_MEDIADIR_RESTORE_VOTING_ALL}</option>
            <option value="restore_comments">{TXT_MEDIADIR_RESTORE_COMMENTS_ALL}</option>
        </select>
        </td>
    </tr>
</table>
<!-- END mediadirEntriesSelectAction -->
<br />
</form>
<!-- END module_mediadir_modify_category.html -->