<!-- START module_mediadir_modify_category.html -->
<script type="text/javascript">
//<![CDATA[
function SetUrl(url, width, height, alt) {
    switch (fileType) {
        case 'image':
        case 'webpages':
            document.getElementById(insertBox).value = url;
            break
        case 'link':
            if (insertText == '') {
                insertText = url;
            }
            newsInsertLink(document.getElementById(insertBox), '<a href="'+url+'">'+insertText+'</a>');
            break;
    }
}

function getFileBrowser(name, type)
{
    insertBox = name;
    fileType = type;

    openWindow('?cmd=fileBrowser&standalone=true&type=mediadir','','width=800,height=600,resizable=yes,status=no,scrollbars=yes');
}

function openWindow(theURL,winName,features){
    browserPopup = window.open(theURL,"Browser",features);
    browserPopup.focus();
}

function ExpandMinimize(toggle){

    if (toggle == 'categoryName') {
        var pattern = /^categoryName/;
    } else {
        var pattern = /^categoryDescription/;
    }

    var reg = new RegExp(pattern);

    var masterValue = document.getElementsByName(toggle + '[0]')[0].value;
    var defaultValue = document.getElementsByName(toggle + '[{MEDIADIR_CATEGORY_DEFAULT_LANG_ID}]')[0].value;

    for (i = 0; i < document.categoryModfyForm.elements.length; ++i) {
        var field = document.categoryModfyForm.elements[i];

        if (field.name.match(reg)) {
            if (field.value == '') {
                field.value = masterValue;
            }

            var regDefaultLang = new RegExp(toggle + '\\[{MEDIADIR_CATEGORY_DEFAULT_LANG_ID}\\]');

            if (field.name.match(regDefaultLang)) {
                field.value = masterValue;
            }

            var regMaster = new RegExp(toggle + '\\[0\\]');

            if (field.name.match(regMaster)) {
                field.value = defaultValue;
            }
        }
    }

    elm1 = document.getElementById(toggle + 'Minimized');
    elm2 = document.getElementById(toggle + 'Expanded');

    elm1.style.display = (elm1.style.display=='none') ? 'block' : 'none';
    elm2.style.display = (elm2.style.display=='none') ? 'block' : 'none';
}
//]]>
</script>

<form name="categoryModfyForm" action="index.php?cmd={MODULE_NAME}&act=modify_category" method="post" >
<input name="categoryId" type="hidden" value="{MEDIADIR_CATEGORY_ID}" />
<table border="0" cellpadding="3" cellspacing="0" width="100%" class="adminlist">
    <tr>
        <th colspan="2">{TXT_MEDIADIR_PAGE_TITLE}</th>
    </tr>
    <tr class="row1">
        <td width="200">{TXT_MEDIADIR_CATEGORY}</td>
        <td>
            <select name="categoryPosition" style="width: 302px">
                <option value="0">{TXT_MEDIADIR_NEW_CATEGORY}</option>
                {MEDIADIR_CATEGORIES_DROPDOWN_OPTIONS}
            </select>
        </td>
    </tr>
    <tr class="row2">
        <td valign="top">{TXT_MEDIADIR_NAME}</td>
        <td>
            <div id="categoryNameMinimized" style="display: block;">
                <input name="categoryName[0]" type="text" style="width: 300px" value="{MEDIADIR_CATEGORY_NAME_MASTER}" />&nbsp;<a href="javascript:ExpandMinimize('categoryName');">{TXT_MEDIADIR_MORE}&nbsp;&raquo;</a><br />
            </div>
            <div id="categoryNameExpanded" style="display: none;">
                <!-- BEGIN mediadirCategoryNameList -->
                <input name="categoryName[{MEDIADIR_CATEGORY_NAME_LANG_ID}]" type="text" style="width: 279px; margin-bottom: 2px; padding-left: 21px; background: #ffffff url('images/flags/flag_{TXT_MEDIADIR_CATEGORY_NAME_LANG_SHORTCUT}.gif') no-repeat 3px 3px;" title="{TXT_MEDIADIR_CATEGORY_NAME_LANG_NAME}" value="{MEDIADIR_CATEGORY_NAME}" />&nbsp;{TXT_MEDIADIR_CATEGORY_NAME_LANG_NAME}&nbsp;&nbsp;&nbsp;{MEDIADIR_MINIMIZE}<br />
                <!-- END mediadirCategoryNameList -->
            </div>
        </td>
    </tr>
    <tr class="row1">
        <td valign="top">{TXT_MEDIADIR_DESCRIPTION}</td>
        <td>
            <div id="categoryDescriptionMinimized" style="display: block;">
                <textarea name="categoryDescription[0]" style="width: 300px; height: 50px;" >{MEDIADIR_CATEGORY_DESCRIPTION_MASTER}</textarea>&nbsp;<a href="javascript:ExpandMinimize('categoryDescription');">{TXT_MEDIADIR_MORE}&nbsp;&raquo;</a>
            </div>
            <div id="categoryDescriptionExpanded" style="display: none;">
                <!-- BEGIN mediadirCategoryDescriptionList -->
                <textarea name="categoryDescription[{MEDIADIR_CATEGORY_DESCRIPTION_LANG_ID}]" style="height: 50px; width: 279px; margin-bottom: 2px; padding-left: 21px; background: #ffffff url('images/flags/flag_{TXT_MEDIADIR_CATEGORY_DESCRIPTION_LANG_SHORTCUT}.gif') no-repeat 3px 3px;" title="{TXT_MEDIADIR_CATEGORY_DESCRIPTION_LANG_NAME}" >{MEDIADIR_CATEGORY_DESCRIPTION}</textarea>&nbsp;{TXT_MEDIADIR_CATEGORY_DESCRIPTION_LANG_NAME}&nbsp;&nbsp;&nbsp;{MEDIADIR_MINIMIZE}<br />
                <!-- END mediadirCategoryDescriptionList -->
            </div>
        </td>
    </tr>
    <tr class="row2">
        <td valign="top">{TXT_MEDIADIR_PICTURE}</td>
        <td>{MEDIADIR_CATEGORY_PICTURE_THUMB}<input type="text" name="categoryImage" value="{MEDIADIR_CATEGORY_PICTURE}" id="categoryImage2" style="width: 300px;" />&nbsp;<input type="button" value="{TXT_MEDIADIR_BROWSE}" onClick="getFileBrowser('categoryImage2', 'image')" /></td>
    </tr>
<!-- not yet implemented    <tr class="row1">
        <td valign="top">{TXT_MEDIADIR_SHOW_SUBCATEGORIES}</td>
        <td><input type="radio" name="categoryShowSubcategories" value="1" {MEDIADIR_CATEGORY_SHOW_SUBCATEGORIES_ON} /> {TXT_MEDIADIR_ACTIVATE} &nbsp;<input type="radio" name="categoryShowSubcategories" value="0" {MEDIADIR_CATEGORY_SHOW_SUBCATEGORIES_OFF} /> {TXT_MEDIADIR_DEACTIVATE}</td>
    </tr> -->
    <tr class="row2">
        <td valign="top">{TXT_MEDIADIR_SHOW_ENTRIES}</td>
        <td><input type="radio" name="categoryShowEntries" value="1" {MEDIADIR_CATEGORY_SHOW_ENTRIES_ON} /> {TXT_MEDIADIR_ACTIVATE} &nbsp;<input type="radio" name="categoryShowEntries" value="0" {MEDIADIR_CATEGORY_SHOW_ENTRIES_OFF} /> {TXT_MEDIADIR_DEACTIVATE}</td>
    </tr>
    <tr class="row1">
        <td valign="top">{TXT_MEDIADIR_VISIBLE}</td>
        <td><input type="radio" name="categoryActive" value="1" {MEDIADIR_CATEGORY_ACTIVE_ON} /> {TXT_MEDIADIR_ACTIVATE} &nbsp;<input type="radio" name="categoryActive" value="0" {MEDIADIR_CATEGORY_ACTIVE_OFF} /> {TXT_MEDIADIR_DEACTIVATE}&nbsp;&nbsp;<span class="tooltip-trigger icon-info"></span><span class="tooltip-message">{TXT_MEDIADIR_VISIBLE_CATEGORY_INFO}</span></td>
    </tr>
</table>
<br />
<input type="submit" name="submitCategoryModfyForm" value="{TXT_MEDIADIR_SUBMIT}" />
</form>
<!-- END module_mediadir_modify_category.html -->
