<!-- START module_media_settings.html -->
<script language="javascript" type="text/javascript">

jQuery(function() {
    for(var i = 1; i <= 4; i++)
    {
        jQuery('#mediaSettings' + i + 'Group').change(function(){
            // show div with groups
            jQuery(this).siblings('.group_div').show();
        });
        jQuery('#mediaSettings' + i + 'Off, #mediaSettings' + i + 'On').change(function(){
            // hide div with groups
            jQuery(this).siblings('.group_div').hide();
        });
    }
});

function SelectAllGroups(link) {
    jQuery(link).siblings(".group_list").find("option").attr("selected", "selected");
    return false;
};

function DeselectAllGroups(link) {
    jQuery(link).siblings(".group_list").find("option").removeAttr("selected");
    return false;
};

function MoveRight(button) {
    var right = jQuery(button).parent().parent().find(".group_list:last");
    jQuery(button).parent().parent().find(".group_list:first").find("option:selected").appendTo(right);
    return false;  
};

function MoveLeft(button) {
    var left = jQuery(button).parent().parent().find(".group_list:first");
    jQuery(button).parent().parent().find(".group_list:last").find("option:selected").appendTo(left);
    return false;  
};

function BeforeSubmit() {
    jQuery(".group_div").find(".group_list:first").find("option:selected").removeAttr("selected").end().end()
    .find(".group_list:last").find("option").attr("selected", "selected");
}

</script>
<form action="index.php?cmd=media&amp;archive=archive1&amp;act=saveSettings" method="post" name="settings">
    <!-- BEGIN mediaAccessSection -->
	<table cellspacing="0" cellpadding="2" width="100%" border="0" class="adminlist">
		<tr>
			<th colspan="2">{TXT_MEDIA_ACCESS_SETTINGS} #{MEDIA_ARCHIVE_NUMBER}</th>
		</tr>
        <tr class="row1">
            <td>
                <input id="mediaSettings{MEDIA_ARCHIVE_NUMBER}Off" type="radio" name="mediaSettings_Media{MEDIA_ARCHIVE_NUMBER}FrontendChangable" value="off" {MEDIA_ALLOW_USER_CHANGE_OFF} /><label for="mediaSettings{MEDIA_ARCHIVE_NUMBER}Off">{TXT_MEDIA_ADDING_DENIED_FOR_ALL}</label><br />
                <input id="mediaSettings{MEDIA_ARCHIVE_NUMBER}On" type="radio" name="mediaSettings_Media{MEDIA_ARCHIVE_NUMBER}FrontendChangable" value="on" {MEDIA_ALLOW_USER_CHANGE_ON} /><label for="mediaSettings{MEDIA_ARCHIVE_NUMBER}On">{TXT_MEDIA_ADDING_ALLOWED_FOR_ALL}</label><br />
                <input id="mediaSettings{MEDIA_ARCHIVE_NUMBER}Group" type="radio" name="mediaSettings_Media{MEDIA_ARCHIVE_NUMBER}FrontendChangable" value="1" {MEDIA_ALLOW_USER_CHANGE_GROUP} /><label for="mediaSettings{MEDIA_ARCHIVE_NUMBER}Group">{TXT_MEDIA_ADDING_ALLOWED_FOR_GROUP}</label><br />
                <div class="group_div" id="mediaSettings{MEDIA_ARCHIVE_NUMBER}GroupList" style="display:{MEDIA_ACCESS_DISPLAY}">
                    <br />
                    <table cellspacing="0" cellpadding="3" border="0" summary="user group assignements">
                        <tbody style="vertical-align:top;">
                            <tr>
                                <td width="300" style="border-bottom:0px;">{TXT_MEDIA_AVAILABLE_USER_GROUPS}<br />
                                    <select class='group_list' name="media{MEDIA_ARCHIVE_NUMBER}_access_not_associated_groups[]" id="media{MEDIA_ARCHIVE_NUMBER}_access_not_associated_groups" size="15" style="width:300px;" multiple="multiple">
                                    {MEDIA_ACCESS_NOT_ASSOCIATED_GROUPS}
                                    </select>
                                    <br />
                                    <a href="#" onclick="return SelectAllGroups(this);" title="{TXT_MEDIA_CHECK_ALL}" style="color:blue;">{TXT_MEDIA_CHECK_ALL}</a>
                                    <br />
                                    <a href="#" onclick="return DeselectAllGroups(this);" title="{TXT_MEDIA_UNCHECK_ALL}" style="color:blue;">{TXT_MEDIA_UNCHECK_ALL}</a>
                                </td>
                                <td width="45" style="border-bottom:0px; text-align:center;">
                                    <br />
                                    <input type="button" value="&gt;&gt;" name="addOption" onclick="return MoveRight(this);" style="margin-bottom:2px;" />
                                    <br />
                                    <input type="button" value="&lt;&lt;" name="removeOption" onclick="return MoveLeft(this);" />
                                </td>
                               <td width="100%" style="border-bottom:0px;">{TXT_MEDIA_ASSIGNED_USER_GROUPS}<br />
                                    <select class='group_list' name="media{MEDIA_ARCHIVE_NUMBER}_access_associated_groups[]" id="media{MEDIA_ARCHIVE_NUMBER}_access_associated_groups" size="15" style="width:300px;" multiple="multiple">
                                    {MEDIA_ACCESS_ASSOCIATED_GROUPS}
                                    </select>
                                    <br />
                                    <a href="#" onclick="return SelectAllGroups(this);" title="{TXT_MEDIA_CHECK_ALL}" style="color:blue;">{TXT_MEDIA_CHECK_ALL}</a>
                                    <br />
                                    <a href="#" onclick="return DeselectAllGroups(this);" title="{TXT_MEDIA_UNCHECK_ALL}" style="color:blue;">{TXT_MEDIA_UNCHECK_ALL}</a>
                                 </td>
                            </tr>
                       </tbody>
                    </table>
                </div>
            </td>
        </tr>
    </table>
    <!-- END mediaAccessSection -->
	<br />
    <input type="submit" value="{TXT_BUTTON_SAVE}" name="save_settings" onclick="BeforeSubmit();"/>
</form>
<!-- END module_media_settings.html -->
